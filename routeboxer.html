<!DOCTYPE html>
<html>
<head>
    <title>RouteBox in Google Maps API</title>
<style>
#map {
  height: 70%;
}

/* 
 * Optional: Makes the sample page fill the window. 
 */
html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}

.controls {
  margin-top: 10px;
  border: 1px solid transparent;
  border-radius: 2px 0 0 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  height: 32px;
  outline: none;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

#origin-input,
#destination-input {
  background-color: #fff;
  font-family: Roboto;
  font-size: 15px;
  font-weight: 300;
  margin-left: 12px;
  padding: 0 11px 0 13px;
  text-overflow: ellipsis;
  width: 200px;
}

#origin-input:focus,
#destination-input:focus {
  border-color: #4d90fe;
}

#mode-selector {
  color: #fff;
  background-color: #4d90fe;
  margin-left: 12px;
  padding: 5px 11px 0px 11px;
}

#mode-selector label {
  font-family: Roboto;
  font-size: 13px;
  font-weight: 300;
}
</style>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDKPlYEWXMQmqJrABi8jtZ53akP5P_RlT0"></script>
   <script src="RouteBoxer.js"></script>
    <script>
        let map;
        let directionsService;
        let directionsRenderer;
        let routeBoxer;

        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: 37.7749, lng: -122.4194 }, // San Francisco
                zoom: 10
            });

            directionsService = new google.maps.DirectionsService();
            directionsRenderer = new google.maps.DirectionsRenderer({ map: map });
            routeBoxer = new RouteBoxer();

            calculateRoute();
        }

        function calculateRoute() {
            const request = {
                origin: "San Francisco, CA",
                destination: "Los Angeles, CA",
                travelMode: google.maps.TravelMode.DRIVING
            };

            directionsService.route(request, function (result, status) {
                if (status === google.maps.DirectionsStatus.OK) {
                    directionsRenderer.setDirections(result);

                    // Generate route boxes along the route
                    const path = result.routes[0].overview_path;
                    const distance = 10; // Distance (in km) for each box
                    const boxes = routeBoxer.box(path, distance);

                    // Draw each box on the map
                    boxes.forEach(box => {
                        new google.maps.Rectangle({
                            bounds: box,
                            fillColor: "#FF0000",
                            fillOpacity: 0.1,
                            strokeColor: "#FF0000",
                            strokeOpacity: 0.8,
                            strokeWeight: 2,
                            map: map
                        });
                    });
                }
            });
        }
    </script>
    <script src="https://unpkg.com/@googlemaps/route-boxer"></script>
</head>
<body onload="initMap()">
<div style="">
      <input
        id="origin-input"
        class="controls"
        type="text"
        placeholder="Enter an origin location"
      />

      <input
        id="destination-input"
        class="controls"
        type="text"
        placeholder="Enter a destination location"
      />

      <div id="mode-selector" class="controls">
        <input
          type="radio"
          name="type"
          id="changemode-walking"
          checked="checked"
        />
        <label for="changemode-walking">Walking</label>

        <input type="radio" name="type" id="changemode-transit" />
        <label for="changemode-transit">Transit</label>

        <input type="radio" name="type" id="changemode-driving" />
        <label for="changemode-driving">Driving</label>
      </div>
    </div>
    <div id="map" style="width: 100%;"></div>
</body>
</html>